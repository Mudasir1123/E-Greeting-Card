@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@{
    ViewData["Title"] = "Categories Management | E-Greeting Card Platform";
    Layout = "_AdminLayout";
}

<!-- Breadcrumbs & Page Title -->
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6">
    <div>
        <div class="flex items-center text-sm text-gray-500 mb-2">
            <a asp-controller="Admin" asp-action="Dashboard" class="hover:text-primary">Dashboard</a>
            <div class="w-4 h-4 flex items-center justify-center mx-1">
                <i class="ri-arrow-right-s-line"></i>
            </div>
            <span class="text-gray-700">Categories</span>
        </div>
        <h1 class="text-2xl font-bold text-gray-900">Categories Management</h1>
    </div>
    <button id="add-category-btn" class="mt-3 sm:mt-0 px-4 py-2 bg-primary text-white rounded-button text-sm font-medium hover:bg-primary/90 whitespace-nowrap">
        <div class="flex items-center">
            <div class="w-4 h-4 flex items-center justify-center mr-2">
                <i class="ri-add-line"></i>
            </div>
            Add New Category
        </div>
    </button>
</div>

<!-- Filters & Search -->
<div class="bg-white rounded shadow p-4 mb-6">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4">
        <div class="flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4">
            <div class="relative inline-block text-left dropdown">
                <button class="flex items-center justify-between w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap">
                    <span>All Categories</span>
                    <div class="w-4 h-4 flex items-center justify-center ml-2">
                        <i class="ri-arrow-down-s-line"></i>
                    </div>
                </button>
                <div class="dropdown-content mt-1">
                    <div class="py-1">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">All Categories</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Birthday</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Anniversary</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Holiday</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Congratulations</a>
                    </div>
                </div>
            </div>
            <div class="relative inline-block text-left dropdown">
                <button class="flex items-center justify-between w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap">
                    <span>Status</span>
                    <div class="w-4 h-4 flex items-center justify-center ml-2">
                        <i class="ri-arrow-down-s-line"></i>
                    </div>
                </button>
                <div class="dropdown-content mt-1">
                    <div class="py-1">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">All Status</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Active</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Inactive</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="relative w-full sm:w-64">
            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                <div class="w-4 h-4 flex items-center justify-center text-gray-400">
                    <i class="ri-search-line"></i>
                </div>
            </div>
            <input type="search" class="pl-10 pr-4 py-2 border border-gray-300 rounded-button text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 w-full" placeholder="Search categories...">
        </div>
    </div>
</div>

<!-- Bulk Actions (appears when items are selected) -->
<div id="bulk-actions" class="bg-blue-50 rounded shadow p-4 mb-6 hidden">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
        <div class="flex items-center">
            <span class="text-sm font-medium text-gray-700 mr-4">3 categories selected</span>
            <button class="text-sm text-gray-600 hover:text-gray-900 mr-4">
                <div class="flex items-center">
                    <div class="w-4 h-4 flex items-center justify-center mr-1">
                        <i class="ri-delete-bin-line"></i>
                    </div>
                    Delete
                </div>
            </button>
            <button class="text-sm text-gray-600 hover:text-gray-900">
                <div class="flex items-center">
                    <div class="w-4 h-4 flex items-center justify-center mr-1">
                        <i class="ri-toggle-line"></i>
                    </div>
                    Change Status
                </div>
            </button>
        </div>
        <button class="mt-3 sm:mt-0 text-sm text-gray-600 hover:text-gray-900">
            <div class="flex items-center">
                <div class="w-4 h-4 flex items-center justify-center mr-1">
                    <i class="ri-close-line"></i>
                </div>
                Cancel Selection
            </div>
        </button>
    </div>
</div>

<!-- Categories Table -->
<div class="bg-white rounded shadow overflow-hidden mb-6">
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left">
                        <div class="flex items-center">
                            <label class="custom-checkbox">
                                <input type="checkbox" id="select-all">
                                <span class="checkbox-mark"></span>
                            </label>
                        </div>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        <div class="flex items-center">
                            <span>Cards</span>
                            <button class="ml-1">
                                <div class="w-4 h-4 flex items-center justify-center text-gray-400">
                                    <i class="ri-arrow-down-s-line"></i>
                                </div>
                            </button>
                        </div>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <label class="custom-checkbox">
                                <input type="checkbox" class="category-checkbox">
                                <span class="checkbox-mark"></span>
                            </label>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="h-10 w-10 flex-shrink-0 mr-4 rounded bg-blue-100 flex items-center justify-center text-blue-600">
                                <div class="w-6 h-6 flex items-center justify-center">
                                    <i class="ri-cake-2-line"></i>
                                </div>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">Birthday</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-500 max-w-xs truncate">Cards for celebrating birthdays with warm wishes and festive designs.</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">128</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <label class="custom-switch">
                            <input type="checkbox" checked>
                            <span class="switch-slider"></span>
                        </label>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <div class="flex items-center justify-end space-x-2">
                            <button class="p-1 text-gray-500 hover:text-primary edit-category-btn" title="Edit">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-edit-line"></i>
                                </div>
                            </button>
                            <button class="p-1 text-gray-500 hover:text-red-500 delete-category-btn" title="Delete">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-delete-bin-line"></i>
                                </div>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <label class="custom-checkbox">
                                <input type="checkbox" class="category-checkbox">
                                <span class="checkbox-mark"></span>
                            </label>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="h-10 w-10 flex-shrink-0 mr-4 rounded bg-red-100 flex items-center justify-center text-red-600">
                                <div class="w-6 h-6 flex items-center justify-center">
                                    <i class="ri-heart-line"></i>
                                </div>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">Anniversary</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-500 max-w-xs truncate">Cards for celebrating special relationship milestones and anniversaries.</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">86</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <label class="custom-switch">
                            <input type="checkbox" checked>
                            <span class="switch-slider"></span>
                        </label>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <div class="flex items-center justify-end space-x-2">
                            <button class="p-1 text-gray-500 hover:text-primary edit-category-btn" title="Edit">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-edit-line"></i>
                                </div>
                            </button>
                            <button class="p-1 text-gray-500 hover:text-red-500 delete-category-btn" title="Delete">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-delete-bin-line"></i>
                                </div>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <label class="custom-checkbox">
                                <input type="checkbox" class="category-checkbox">
                                <span class="checkbox-mark"></span>
                            </label>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="h-10 w-10 flex-shrink-0 mr-4 rounded bg-green-100 flex items-center justify-center text-green-600">
                                <div class="w-6 h-6 flex items-center justify-center">
                                    <i class="ri-gift-line"></i>
                                </div>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">Holiday</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-500 max-w-xs truncate">Festive cards for various holidays throughout the year, including Christmas, Hanukkah, and New Year.</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">142</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <label class="custom-switch">
                            <input type="checkbox" checked>
                            <span class="switch-slider"></span>
                        </label>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <div class="flex items-center justify-end space-x-2">
                            <button class="p-1 text-gray-500 hover:text-primary edit-category-btn" title="Edit">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-edit-line"></i>
                                </div>
                            </button>
                            <button class="p-1 text-gray-500 hover:text-red-500 delete-category-btn" title="Delete">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-delete-bin-line"></i>
                                </div>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <label class="custom-checkbox">
                                <input type="checkbox" class="category-checkbox">
                                <span class="checkbox-mark"></span>
                            </label>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="h-10 w-10 flex-shrink-0 mr-4 rounded bg-yellow-100 flex items-center justify-center text-yellow-600">
                                <div class="w-6 h-6 flex items-center justify-center">
                                    <i class="ri-medal-line"></i>
                                </div>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">Congratulations</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-500 max-w-xs truncate">Cards to celebrate achievements, promotions, graduations, and other milestones.</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">98</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <label class="custom-switch">
                            <input type="checkbox" checked>
                            <span class="switch-slider"></span>
                        </label>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <div class="flex items-center justify-end space-x-2">
                            <button class="p-1 text-gray-500 hover:text-primary edit-category-btn" title="Edit">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-edit-line"></i>
                                </div>
                            </button>
                            <button class="p-1 text-gray-500 hover:text-red-500 delete-category-btn" title="Delete">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-delete-bin-line"></i>
                                </div>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <label class="custom-checkbox">
                                <input type="checkbox" class="category-checkbox">
                                <span class="checkbox-mark"></span>
                            </label>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="h-10 w-10 flex-shrink-0 mr-4 rounded bg-purple-100 flex items-center justify-center text-purple-600">
                                <div class="w-6 h-6 flex items-center justify-center">
                                    <i class="ri-flower-line"></i>
                                </div>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">Thank You</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-500 max-w-xs truncate">Cards expressing gratitude and appreciation for gifts, support, or kindness.</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">74</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <label class="custom-switch">
                            <input type="checkbox" checked>
                            <span class="switch-slider"></span>
                        </label>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <div class="flex items-center justify-end space-x-2">
                            <button class="p-1 text-gray-500 hover:text-primary edit-category-btn" title="Edit">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-edit-line"></i>
                                </div>
                            </button>
                            <button class="p-1 text-gray-500 hover:text-red-500 delete-category-btn" title="Delete">
                                <div class="w-5 h-5 flex items-center justify-center">
                                    <i class="ri-delete-bin-line"></i>
                                </div>
                            </button>
                        </div>
                    </td>
                </tr>
                <!-- Additional rows would continue here -->
            </tbody>
        </table>
    </div>
    <!-- Pagination -->
    <div class="px-6 py-4 bg-white border-t border-gray-200">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
            <div class="flex items-center">
                <span class="text-sm text-gray-700 mr-2">Show</span>
                <div class="relative inline-block text-left dropdown">
                    <button class="flex items-center justify-between px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap">
                        <span>10</span>
                        <div class="w-4 h-4 flex items-center justify-center ml-1">
                            <i class="ri-arrow-down-s-line"></i>
                        </div>
                    </button>
                    <div class="dropdown-content mt-1">
                        <div class="py-1">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">10</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">25</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">50</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">100</a>
                        </div>
                    </div>
                </div>
                <span class="text-sm text-gray-700 ml-2">entries</span>
            </div>
            <div class="mt-4 sm:mt-0 flex items-center justify-center">
                <span class="text-sm text-gray-700 mr-4">Showing 1 to 10 of 12 entries</span>
                <nav class="flex items-center space-x-1">
                    <button class="px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="w-4 h-4 flex items-center justify-center mr-1">
                                <i class="ri-arrow-left-s-line"></i>
                            </div>
                            Previous
                        </div>
                    </button>
                    <button class="px-3 py-1 text-sm font-medium text-white bg-primary border border-primary rounded-button whitespace-nowrap">1</button>
                    <button class="px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap">2</button>
                    <button class="px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap">
                        <div class="flex items-center">
                            Next
                            <div class="w-4 h-4 flex items-center justify-center ml-1">
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                        </div>
                    </button>
                </nav>
            </div>
        </div>
    </div>
</div>

<!-- Add/Edit Category Modal -->
<div id="category-modal" class="modal">
    <div class="modal-content p-6">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-lg font-medium text-gray-900" id="modal-title">Add New Category</h3>
            <button id="close-modal" class="text-gray-400 hover:text-gray-500">
                <div class="w-6 h-6 flex items-center justify-center">
                    <i class="ri-close-line"></i>
                </div>
            </button>
        </div>
        <form id="category-form">
            <div class="space-y-4">
                <div>
                    <label for="category-name" class="block text-sm font-medium text-gray-700 mb-1">Category Name</label>
                    <input type="text" id="category-name" class="w-full px-3 py-2 border border-gray-300 rounded-button text-sm focus:outline-none focus:ring-2 focus:ring-primary/20" placeholder="Enter category name">
                </div>
                <div>
                    <label for="category-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea id="category-description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-button text-sm focus:outline-none focus:ring-2 focus:ring-primary/20" placeholder="Enter category description"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Icon</label>
                    <div class="grid grid-cols-6 gap-2">
                        <button type="button" class="w-10 h-10 rounded bg-blue-100 flex items-center justify-center text-blue-600 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <i class="ri-cake-2-line"></i>
                            </div>
                        </button>
                        <button type="button" class="w-10 h-10 rounded bg-red-100 flex items-center justify-center text-red-600 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <i class="ri-heart-line"></i>
                            </div>
                        </button>
                        <button type="button" class="w-10 h-10 rounded bg-green-100 flex items-center justify-center text-green-600 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-green-500">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <i class="ri-gift-line"></i>
                            </div>
                        </button>
                        <button type="button" class="w-10 h-10 rounded bg-yellow-100 flex items-center justify-center text-yellow-600 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-500">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <i class="ri-medal-line"></i>
                            </div>
                        </button>
                        <button type="button" class="w-10 h-10 rounded bg-purple-100 flex items-center justify-center text-purple-600 hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <i class="ri-flower-line"></i>
                            </div>
                        </button>
                        <button type="button" class="w-10 h-10 rounded bg-pink-100 flex items-center justify-center text-pink-600 hover:bg-pink-200 focus:outline-none focus:ring-2 focus:ring-pink-500">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <i class="ri-parent-line"></i>
                            </div>
                        </button>
                    </div>
                </div>
                <div class="flex items-center">
                    <label class="inline-flex items-center">
                        <input type="checkbox" id="category-status" class="form-checkbox h-4 w-4 text-primary rounded border-gray-300" checked>
                        <span class="ml-2 text-sm text-gray-700">Active</span>
                    </label>
                </div>
            </div>
            <div class="mt-6 flex justify-end space-x-3">
                <button type="button" id="cancel-button" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-button text-sm font-medium hover:bg-gray-200 whitespace-nowrap">Cancel</button>
                <button type="submit" class="px-4 py-2 bg-primary text-white rounded-button text-sm font-medium hover:bg-primary/90 whitespace-nowrap">Save Category</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="delete-modal" class="modal">
    <div class="modal-content p-6">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-lg font-medium text-gray-900">Confirm Delete</h3>
            <button id="close-delete-modal" class="text-gray-400 hover:text-gray-500">
                <div class="w-6 h-6 flex items-center justify-center">
                    <i class="ri-close-line"></i>
                </div>
            </button>
        </div>
        <div class="mb-6">
            <p class="text-sm text-gray-500">Are you sure you want to delete this category? This action cannot be undone and will remove all associated cards.</p>
        </div>
        <div class="flex justify-end space-x-3">
            <button id="cancel-delete" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-button text-sm font-medium hover:bg-gray-200 whitespace-nowrap">Cancel</button>
            <button id="confirm-delete" class="px-4 py-2 bg-red-600 text-white rounded-button text-sm font-medium hover:bg-red-700 whitespace-nowrap">Delete Category</button>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle select all checkbox
            const selectAllCheckbox = document.getElementById('select-all');
            const categoryCheckboxes = document.querySelectorAll('.category-checkbox');
            const bulkActions = document.getElementById('bulk-actions');

            selectAllCheckbox.addEventListener('change', function() {
                const isChecked = this.checked;
                categoryCheckboxes.forEach(checkbox => {
                    checkbox.checked = isChecked;
                });
                updateBulkActionsVisibility();
            });

            // Handle individual checkboxes
            categoryCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateSelectAllCheckbox();
                    updateBulkActionsVisibility();
                });
            });

            // Update the "select all" checkbox state
            function updateSelectAllCheckbox() {
                const checkedCount = document.querySelectorAll('.category-checkbox:checked').length;
                selectAllCheckbox.checked = checkedCount === categoryCheckboxes.length && categoryCheckboxes.length > 0;
            }

            // Show/hide bulk actions based on selection
            function updateBulkActionsVisibility() {
                const checkedCount = document.querySelectorAll('.category-checkbox:checked').length;
                if (checkedCount > 0) {
                    bulkActions.classList.remove('hidden');
                } else {
                    bulkActions.classList.add('hidden');
                }
            }

            // Cancel selection button
            const cancelSelectionButton = document.querySelector('#bulk-actions button:last-child');
            if (cancelSelectionButton) {
                cancelSelectionButton.addEventListener('click', function() {
                    selectAllCheckbox.checked = false;
                    categoryCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    bulkActions.classList.add('hidden');
                });
            }

            // Modal functionality
            const categoryModal = document.getElementById('category-modal');
            const deleteModal = document.getElementById('delete-modal');
            const addCategoryBtn = document.getElementById('add-category-btn');
            const closeModalBtn = document.getElementById('close-modal');
            const cancelBtn = document.getElementById('cancel-button');
            const closeDeleteModalBtn = document.getElementById('close-delete-modal');
            const cancelDeleteBtn = document.getElementById('cancel-delete');
            const editCategoryBtns = document.querySelectorAll('.edit-category-btn');
            const deleteCategoryBtns = document.querySelectorAll('.delete-category-btn');
            const modalTitle = document.getElementById('modal-title');

            // Open add category modal
            addCategoryBtn.addEventListener('click', function() {
                modalTitle.textContent = 'Add New Category';
                document.getElementById('category-form').reset();
                categoryModal.style.display = 'block';
            });

            // Close category modal
            function closeCategoryModal() {
                categoryModal.style.display = 'none';
            }

            closeModalBtn.addEventListener('click', closeCategoryModal);
            cancelBtn.addEventListener('click', closeCategoryModal);

            // Close delete modal
            function closeDeleteModal() {
                deleteModal.style.display = 'none';
            }

            closeDeleteModalBtn.addEventListener('click', closeDeleteModal);
            cancelDeleteBtn.addEventListener('click', closeDeleteModal);

            // Open edit category modal
            editCategoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    modalTitle.textContent = 'Edit Category';
                    categoryModal.style.display = 'block';
                    // Here you would typically populate the form with the category's data
                });
            });

            // Open delete confirmation modal
            deleteCategoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    deleteModal.style.display = 'block';
                });
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === categoryModal) {
                    closeCategoryModal();
                }
                if (event.target === deleteModal) {
                    closeDeleteModal();
                }
            });

            // Form submission (prevent default for demo)
            document.getElementById('category-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // Here you would typically handle the form submission
                closeCategoryModal();
            });

            // Delete confirmation
            document.getElementById('confirm-delete').addEventListener('click', function() {
                // Here you would typically handle the delete action
                closeDeleteModal();
            });

            // Icon selection
            const iconButtons = document.querySelectorAll('#category-form button[type="button"]');
            iconButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove selected class from all buttons
                    iconButtons.forEach(btn => {
                        btn.classList.remove('ring-2');
                    });
                    // Add selected class to clicked button
                    this.classList.add('ring-2');
                });
            });
        });
    </script>
}
